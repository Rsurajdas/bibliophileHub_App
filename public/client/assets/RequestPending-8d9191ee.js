import{r as o,u as N,a as v,j as e,C as w,L as i}from"./index-a7bd720d.js";import{T as y}from"./Title-1758a322.js";import{B as l}from"./Button-0c7a912b.js";import{k as b,Q as h}from"./react-toastify.esm-96ce24d9.js";/* empty css                      */import{R as m,C as c}from"./Row-a305f01f.js";const B=()=>{const[a,x]=o.useState([]),[d,j]=o.useState(!0),r=N("token"),{profileId:n}=v(),u=async s=>{const g=await(await fetch(`http://127.0.0.1:3000/api/v1/users/request_pending/${s}`,{method:"GET",headers:{Authorization:`Bearer ${r}`}})).json();j(!1),x(g.data.users)},p=async s=>{try{await(await fetch(`http://127.0.0.1:3000/api/v1/users/accept-request/${s}`,{method:"POST",headers:{Authorization:`Bearer ${r}`}})).json(),window.location.reload(!0)}catch(t){h.error(t.message)}},f=async s=>{try{await(await fetch(`http://127.0.0.1:3000/api/v1/users/cancel-request/${s}`,{method:"POST",headers:{Authorization:`Bearer ${r}`}})).json(),window.location.reload(!0)}catch(t){h.error(t.message)}};return o.useEffect(()=>{u(n)},[n]),e.jsxs("main",{children:[console.log(a.length<0),e.jsx("section",{className:"py-5",children:e.jsx(w,{children:e.jsx(m,{children:e.jsx(c,{md:10,className:"mx-auto",children:e.jsxs(m,{className:"gx-5",children:[e.jsx(c,{md:8,children:e.jsxs("div",{className:"friends-wrapper",children:[e.jsx(y,{element:e.jsx("h6",{className:"border-bottom pb-2 mb-2",style:{fontWeight:700,fontSize:"14px"},children:"Pending Request"})}),e.jsx("ul",{children:!d&&a.length>0&&a.map(s=>e.jsx("li",{children:e.jsxs("div",{className:"friend-item",children:[e.jsxs("div",{className:"friend-left",children:[e.jsx("div",{className:"friend-img",children:e.jsx("img",{src:`http://127.0.0.1:3000${s.photo}`,alt:s.name})}),e.jsxs("div",{className:"friend-detail ps-2",children:[e.jsx("h6",{className:"",style:{fontWeight:700,fontSize:"14px",margin:"0"},children:e.jsx(i,{to:`/profile/${s._id}`,children:s.name})}),e.jsx("div",{className:"",children:s.email})]})]}),e.jsxs("div",{className:"friend-right",children:[e.jsx(l,{text:"accept",variant:"solid",onClick:()=>p(s._id),sx:{display:"block",marginBottom:"10px"}}),e.jsx(l,{text:"cancel",variant:"solid",onClick:()=>f(s._id),sx:{display:"block",backgroundColor:"#b8b8b8"}})]})]})},s._id))}),!d&&a.length<0&&e.jsx("p",{children:"No pending request"})]})}),e.jsx(c,{md:4,children:e.jsxs("div",{className:"friends-link",children:[e.jsx("div",{className:"",children:e.jsxs(i,{to:`/following/${n}`,style:{color:"#2a2a2a"},children:["People I","'","m following"]})}),e.jsx("div",{className:"",children:e.jsx(i,{to:`/followers/${n}`,style:{color:"#2a2a2a"},children:"My followers"})}),e.jsx("div",{className:"",children:e.jsx(i,{to:"/add-friends",style:{color:"#2a2a2a"},children:"Add friends"})})]})})]})})})})}),e.jsx(b,{position:"bottom-left"})]})};export{B as default};
