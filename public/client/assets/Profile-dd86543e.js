import{A as se,y as re,D as ee,_ as g,ab as oe,a8 as _,r as N,G as ne,v as ae,j as t,w as K,x as ie,c as le,d as ce,g as de,u as V,L as J,C as ue,a as C,b as O}from"./index-3c314f58.js";import{P as me,C as pe}from"./CurrentlyReading-f9e1115f.js";import{T as P}from"./Title-89458592.js";import{R as X,C as L}from"./Row-9b61c6f3.js";import"./Post-8a770ad9.js";import"./Typography-41db5ac4.js";/* empty css             */import"./debounce-517eeb3c.js";var s={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q=Symbol.for("react.element"),H=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),z=Symbol.for("react.context"),fe=Symbol.for("react.server_context"),R=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),te;te=Symbol.for("react.module.reference");function a(e){if(typeof e=="object"&&e!==null){var o=e.$$typeof;switch(o){case Q:switch(e=e.type,e){case F:case G:case M:case q:case U:return e;default:switch(e=e&&e.$$typeof,e){case fe:case z:case R:case W:case E:case k:return e;default:return o}}case H:return o}}}s.ContextConsumer=z;s.ContextProvider=k;s.Element=Q;s.ForwardRef=R;s.Fragment=F;s.Lazy=W;s.Memo=E;s.Portal=H;s.Profiler=G;s.StrictMode=M;s.Suspense=q;s.SuspenseList=U;s.isAsyncMode=function(){return!1};s.isConcurrentMode=function(){return!1};s.isContextConsumer=function(e){return a(e)===z};s.isContextProvider=function(e){return a(e)===k};s.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Q};s.isForwardRef=function(e){return a(e)===R};s.isFragment=function(e){return a(e)===F};s.isLazy=function(e){return a(e)===W};s.isMemo=function(e){return a(e)===E};s.isPortal=function(e){return a(e)===H};s.isProfiler=function(e){return a(e)===G};s.isStrictMode=function(e){return a(e)===M};s.isSuspense=function(e){return a(e)===q};s.isSuspenseList=function(e){return a(e)===U};s.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===F||e===G||e===M||e===q||e===U||e===he||typeof e=="object"&&e!==null&&(e.$$typeof===W||e.$$typeof===E||e.$$typeof===k||e.$$typeof===z||e.$$typeof===R||e.$$typeof===te||e.getModuleId!==void 0)};s.typeOf=a;function xe(e){return re("MuiAvatarGroup",e)}const ge=se("MuiAvatarGroup",["root","avatar"]),ye=ge,ve=["children","className","component","componentsProps","max","slotProps","spacing","total","variant"],Y={small:-16,medium:null},je=e=>{const{classes:o}=e;return ie({root:["root"],avatar:["avatar"]},xe,o)},be=ee("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,o)=>g({[`& .${ye.avatar}`]:o.avatar},o.root)})(({theme:e})=>({[`& .${oe.root}`]:{border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"})),we=ee(_,{name:"MuiAvatarGroup",slot:"Avatar",overridesResolver:(e,o)=>o.avatar})(({theme:e})=>({border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}})),$e=N.forwardRef(function(o,y){var S;const n=ne({props:o,name:"MuiAvatarGroup"}),{children:I,className:T,component:A="div",componentsProps:v={},max:j=5,slotProps:B={},spacing:d="medium",total:m,variant:b="circular"}=n,D=ae(n,ve);let i=j<2?2:j;const p=g({},n,{max:j,spacing:d,component:A,variant:b}),f=je(p),h=N.Children.toArray(I).filter(l=>N.isValidElement(l)),u=m||h.length;u===i&&(i+=1),i=Math.min(u+1,i);const x=Math.min(h.length,i-1),w=Math.max(u-i,u-x,0),$=d&&Y[d]!==void 0?Y[d]:-d,c=(S=B.additionalAvatar)!=null?S:v.additionalAvatar;return t.jsxs(be,g({as:A,ownerState:p,className:K(f.root,T),ref:y},D,{children:[w?t.jsxs(we,g({ownerState:p,variant:b},c,{className:K(f.avatar,c==null?void 0:c.className),style:g({marginLeft:$},c==null?void 0:c.style),children:["+",w]})):null,h.slice(0,x).reverse().map((l,r)=>N.cloneElement(l,{className:K(l.props.className,f.avatar),style:g({marginLeft:r===x-1?void 0:$},l.props.style),variant:l.props.variant||b}))]}))}),Z=$e,Me=()=>{var i,p,f,h,u,x,w,$,c,l;const e=le("token");let{profileId:o}=ce();const y=de(),S=async r=>O.get(`https://boiling-wildwood-46640-30ec30629e36.herokuapp.com/api/v1/users/get-user/${r}`,{headers:{Authorization:`Bearer ${e}`}}),{data:n,isLoading:I,isFetching:T}=V({queryKey:["user",o],queryFn:()=>S(o),select:r=>r.data.data.user}),A=async r=>O.get(`https://boiling-wildwood-46640-30ec30629e36.herokuapp.com/api/v1/posts/get-posts/${r}`,{headers:{Authorization:`Bearer ${e}`}}),{data:v,isLoading:j,isFetching:B}=V({queryKey:["user-posts",o],queryFn:()=>A(o),select:r=>r.data.data.posts}),d=async r=>O.get(`https://boiling-wildwood-46640-30ec30629e36.herokuapp.com/api/v1/shelf/get-currently-reading/books/${r}`,{headers:{Authorization:`Bearer ${e}`}}),{data:m,isLoading:b,isFetching:D}=V({queryKey:["readings",o],queryFn:()=>d(o),select:r=>r.data.data.books});return I||j||b?t.jsx(J,{}):T||B||D?t.jsx(J,{}):t.jsx("main",{children:t.jsx("section",{className:"py-4 mb-2",children:t.jsx(ue,{children:t.jsxs(X,{children:[t.jsx(L,{md:8,className:"px-5",children:t.jsx("div",{className:"profile-details",children:t.jsxs(X,{children:[t.jsx(L,{md:3,children:t.jsx(_,{sizes:"large",alt:n.name,src:n.photo,sx:{width:"150px",height:"150px",margin:"0 auto"}})}),t.jsxs(L,{md:9,children:[t.jsxs("div",{className:"profile-details_content",children:[t.jsx("h5",{className:"border-bottom pb-1",children:n.name}),t.jsxs("div",{style:{fontSize:"14px"},children:[t.jsxs("div",{className:"",children:[t.jsx("span",{style:{fontWeight:700},children:"Email:"})," ",n.email]}),t.jsxs("div",{className:"",children:[t.jsx("span",{style:{fontWeight:700},children:"Friends:"})," ",t.jsxs(C,{to:`/friends/${n._id}`,children:[(i=n.friends)==null?void 0:i.length," friends"]})]}),t.jsxs("div",{className:"",children:[t.jsx("span",{style:{fontWeight:700},children:"Followers:"})," ",t.jsxs(C,{to:`/followers/${o}`,children:[(p=n.followers)==null?void 0:p.length," followers"]})]}),t.jsxs("div",{className:"",children:[t.jsx("span",{style:{fontWeight:700},children:"Following:"})," ",t.jsxs(C,{to:`/following/${n._id}`,children:[(f=n.following)==null?void 0:f.length," following"]})]})]})]}),t.jsxs("div",{className:"user-posts mt-5",children:[t.jsx(P,{element:t.jsxs("h5",{className:"border-bottom pb-2 mb-4",children:["User","'","s Post"]})}),v.length>0&&v.map(r=>t.jsx(me,{post:r},r._id)),v.length===0&&t.jsx("p",{children:"No post found!"})]})]})]})})}),t.jsxs(L,{md:4,children:[t.jsxs("div",{className:"user-following mt-4",children:[t.jsx(P,{element:t.jsxs("h6",{className:"border-bottom pb-2 mb-2",style:{fontWeight:700,fontSize:"14px"},children:[n.name," is following"]})}),((h=n.following)==null?void 0:h.length)>0&&t.jsx(Z,{max:4,total:(u=n.following)==null?void 0:u.length,sx:{justifyContent:"flex-end"},children:(x=n.following)==null?void 0:x.map(r=>t.jsx(_,{alt:r.name,src:r.photo},r._id))}),((w=n.following)==null?void 0:w.length)===0&&t.jsx("p",{children:"you following no one"})]}),(($=n.request_pending)==null?void 0:$.length)>0&&y===o?t.jsxs("div",{className:"user-following mt-4",children:[t.jsx(P,{element:t.jsxs("div",{className:"d-flex align-items-center border-bottom pb-2 mb-2 justify-content-between",children:[t.jsx("h6",{style:{fontWeight:700,fontSize:"14px",margin:0},children:"Pending request"}),t.jsx(C,{to:`/request-pending/${o}`,children:"more..."})]})}),t.jsx(Z,{max:4,total:(c=n.request_pending)==null?void 0:c.length,sx:{justifyContent:"flex-end"},children:(l=n.request_pending)==null?void 0:l.map(r=>t.jsx(_,{alt:r.name,src:r.photo},r._id))})]}):null,t.jsxs("div",{className:"currently-reading mt-4",children:[t.jsx(P,{element:t.jsxs("h6",{className:"border-bottom pb-2 mb-2",style:{fontWeight:700,fontSize:"14px"},children:[n.name," currently reading"]})}),t.jsxs("div",{className:"mt-3",children:[m==null?void 0:m.map(r=>t.jsx(pe,{book:r,currentUser:y===o},r.book._id)),!m.length&&t.jsx("p",{children:"Add books to Currently reading shelf"})]})]})]})]})})})})};export{Me as default};
